<form #frm (submit)="loading=true;saveConstraints(frm);loading=false">

  <div class="addConstraintsDiv">

    <br>
    <mat-form-field>
      <mat-label>בחר ארגון</mat-label>
      <mat-select>
        <mat-option *ngFor="let org of relevantOrganizations" (onSelectionChange)="updateSelection(org.org_code)" [value]="org.org_name">
          {{org.org_name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <br><br>

    <mat-form-field>
      <mat-label>בחר שעות</mat-label>
      <mat-select [formControl]="hours" multiple>
        <mat-option  style="direction: rtl;" *ngFor="let hour of listOfHours" [value]="hour.start + '-' + hour.end"  (click)="updateHoursSelection(hour.code)">{{hour.start.at_hour}} - {{hour.end.at_hour}}</mat-option>
      </mat-select>
    </mat-form-field>

    <br><br>
    <mat-button-toggle-group class="days" #specificDays multiple aria-required="true">
      <mat-button-toggle *ngFor="let day of days" (change)="selectionChange(day.code)" >{{day.name}}</mat-button-toggle>
    </mat-button-toggle-group>
  <br><br>
   <br>
   <button name="save" mat-raised-button color="accent" class="ok" type="submit" [disabled]="moneSelectedDays==0">אישור</button>
   <br>
 </div>

 <div class="tableDiv" *ngIf="loading">
  <h2> הזמנים שאני יכול בהם בארגון זה</h2>
  <img src="../../../assets/dots.gif" />
  <table *ngIf="!loading">
    <tbody >
      <tr *ngFor="let timeslot of dataSource">
        <td>
          <button mat-icon-button color="primary" (click)="loading=true;DeleteFromDataSource(timeslot.time_slot_code);">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
      <td>ביום {{days[timeslot.day_of_week-1].name}}, בין השעות {{allHours[timeslot.start_at_hour-1].at_hour}} - {{allHours[timeslot.end_at_hour-1].at_hour}}</td>
       </tr>
    </tbody>
  </table>
  <br>
  <button name="stayInCurrentSchedule" mat-raised-button color="accent" style="margin:7px;" *ngIf="showChangesButtons">הישאר במערכת הנוכחית</button>
  <button name="leaveTheCurrentSchedule" mat-raised-button color="accent"  *ngIf="showChangesButtons">בטל את המערכת שלי עד לשיבוץ הבא</button>
</div>
</form>

